<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Print Quality Visual Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .font-test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .font-sample {
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 6px;
            background: white;
        }
        
        .font-sample h4 {
            margin: 0 0 10px 0;
            color: #333;
            font-size: 14px;
        }
        
        .quality-indicator {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: bold;
            margin-left: 10px;
        }
        
        .quality-excellent { background: #d4edda; color: #155724; }
        .quality-good { background: #d1ecf1; color: #0c5460; }
        .quality-fair { background: #fff3cd; color: #856404; }
        .quality-poor { background: #f8d7da; color: #721c24; }
        
        .dpi-test-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .dpi-sample {
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 6px;
            background: white;
            text-align: center;
        }
        
        .test-text-tiny { font-size: 8px; }
        .test-text-small { font-size: 10px; }
        .test-text-normal { font-size: 12px; }
        .test-text-medium { font-size: 14px; }
        .test-text-large { font-size: 16px; }
        .test-text-title { font-size: 20px; }
        .test-text-heading { font-size: 24px; }
        .test-text-display { font-size: 32px; }
        .test-text-tracing { font-size: 48px; }
        
        .line-height-tight { line-height: 1.0; }
        .line-height-normal { line-height: 1.2; }
        .line-height-comfortable { line-height: 1.4; }
        .line-height-loose { line-height: 1.6; }
        .line-height-very-loose { line-height: 2.0; }
        
        .print-preview {
            width: 210mm;
            height: 297mm;
            background: white;
            border: 2px solid #333;
            padding: 20mm 15mm;
            box-sizing: border-box;
            transform: scale(0.4);
            transform-origin: top left;
            margin-bottom: -180mm;
            font-size: 14px;
            line-height: 1.4;
        }
        
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        
        .test-button:hover {
            background: #0056b3;
        }
        
        .test-result {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        
        .test-pass {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        
        .test-fail {
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        
        .test-warning {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }
        
        .log-output {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 15px;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        
        .arabic-text {
            font-family: 'Amiri', serif;
            direction: rtl;
            text-align: right;
        }
        
        .comic-text {
            font-family: 'Comic Neue', cursive;
        }
        
        @media print {
            body { background: white; }
            .no-print { display: none !important; }
            .print-preview { 
                transform: none; 
                margin: 0; 
                page-break-after: always; 
            }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <h1>üñ®Ô∏è Print Quality Visual Test</h1>
    <p>This page helps you visually test print quality, readability, and font rendering for A4 PDF generation.</p>
    
    <div class="test-container no-print">
        <h2>üéØ Test Controls</h2>
        <button class="test-button" onclick="runReadabilityTest()">Test Readability</button>
        <button class="test-button" onclick="testFontSizes()">Test Font Sizes</button>
        <button class="test-button" onclick="testLineHeights()">Test Line Heights</button>
        <button class="test-button" onclick="testPrintPreview()">Generate Print Preview</button>
        <button class="test-button" onclick="window.print()">Print Test Page</button>
        <button class="test-button" onclick="clearLog()">Clear Log</button>
    </div>
    
    <div class="test-container">
        <h2>üìù Font Size Readability Test</h2>
        <div class="font-test-grid">
            <div class="font-sample">
                <h4>Too Small (8px) <span class="quality-indicator quality-poor">Poor</span></h4>
                <p class="test-text-tiny">This text is too small for comfortable reading on A4 paper. It may cause eye strain and be difficult to read when printed.</p>
            </div>
            
            <div class="font-sample">
                <h4>Small (10px) <span class="quality-indicator quality-fair">Fair</span></h4>
                <p class="test-text-small">This is the minimum readable font size. Acceptable for small text like footnotes but not ideal for main content.</p>
            </div>
            
            <div class="font-sample">
                <h4>Normal (12px) <span class="quality-indicator quality-good">Good</span></h4>
                <p class="test-text-normal">This is a good font size for body text. It's readable and comfortable for extended reading on A4 paper.</p>
            </div>
            
            <div class="font-sample">
                <h4>Optimal (14px) <span class="quality-indicator quality-excellent">Excellent</span></h4>
                <p class="test-text-medium">This is the optimal font size for body text on A4. It provides excellent readability and comfort.</p>
            </div>
            
            <div class="font-sample">
                <h4>Large (16px) <span class="quality-indicator quality-good">Good</span></h4>
                <p class="test-text-large">This is good for emphasis or for readers who prefer larger text. Still appropriate for A4 format.</p>
            </div>
            
            <div class="font-sample">
                <h4>Title (20px) <span class="quality-indicator quality-good">Good</span></h4>
                <p class="test-text-title">This size works well for exercise titles and section headings on A4 worksheets.</p>
            </div>
            
            <div class="font-sample">
                <h4>Heading (24px) <span class="quality-indicator quality-excellent">Excellent</span></h4>
                <p class="test-text-heading">Perfect for main headings and worksheet titles on A4 paper.</p>
            </div>
            
            <div class="font-sample">
                <h4>Display (32px) <span class="quality-indicator quality-good">Good</span></h4>
                <p class="test-text-display">Good for large numbers, math problems, and emphasis.</p>
            </div>
            
            <div class="font-sample">
                <h4>Tracing (48px) <span class="quality-indicator quality-excellent">Excellent</span></h4>
                <p class="test-text-tracing">ABCDE</p>
                <small>Perfect size for tracing exercises on A4 worksheets.</small>
            </div>
        </div>
    </div>
    
    <div class="test-container">
        <h2>üìè Line Height Test</h2>
        <div class="font-test-grid">
            <div class="font-sample">
                <h4>Too Tight (1.0) <span class="quality-indicator quality-poor">Poor</span></h4>
                <p class="test-text-medium line-height-tight">This line height is too tight and makes text hard to read. Lines appear cramped together and reduce readability significantly.</p>
            </div>
            
            <div class="font-sample">
                <h4>Minimal (1.2) <span class="quality-indicator quality-fair">Fair</span></h4>
                <p class="test-text-medium line-height-normal">This is the minimum acceptable line height. It's readable but not optimal for extended reading on printed materials.</p>
            </div>
            
            <div class="font-sample">
                <h4>Optimal (1.4) <span class="quality-indicator quality-excellent">Excellent</span></h4>
                <p class="test-text-medium line-height-comfortable">This is the optimal line height for readability. It provides perfect balance between compactness and comfort for A4 printing.</p>
            </div>
            
            <div class="font-sample">
                <h4>Comfortable (1.6) <span class="quality-indicator quality-good">Good</span></h4>
                <p class="test-text-medium line-height-loose">This line height is comfortable for reading but uses more space. Good for readers who prefer more breathing room.</p>
            </div>
            
            <div class="font-sample">
                <h4>Too Loose (2.0) <span class="quality-indicator quality-fair">Fair</span></h4>
                <p class="test-text-medium line-height-very-loose">This line height is too loose and wastes valuable space on A4 paper. It can also make text harder to follow.</p>
            </div>
        </div>
    </div>
    
    <div class="test-container">
        <h2>üåç Multi-Language Font Test</h2>
        <div class="font-test-grid">
            <div class="font-sample">
                <h4>English (Arial) <span class="quality-indicator quality-excellent">Excellent</span></h4>
                <p class="test-text-medium">The quick brown fox jumps over the lazy dog. This tests all English letters and common punctuation marks for clarity.</p>
            </div>
            
            <div class="font-sample">
                <h4>Kid-Friendly (Comic Neue) <span class="quality-indicator quality-excellent">Excellent</span></h4>
                <p class="test-text-medium comic-text">This is a fun, kid-friendly font that's perfect for children's worksheets. It's playful yet highly readable.</p>
            </div>
            
            <div class="font-sample">
                <h4>Arabic (Amiri) <span class="quality-indicator quality-good">Good</span></h4>
                <p class="test-text-large arabic-text">ÿ®Ÿêÿ≥ŸíŸÖŸê ÿßŸÑŸÑŸéŸëŸáŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸíŸÖŸéŸÜŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸêŸäŸÖŸê</p>
                <p class="test-text-medium arabic-text">Ÿáÿ∞ÿß ŸÜÿµ ÿ™ÿ¨ÿ±Ÿäÿ®Ÿä ÿ®ÿßŸÑŸÑÿ∫ÿ© ÿßŸÑÿπÿ±ÿ®Ÿäÿ© ŸÑÿßÿÆÿ™ÿ®ÿßÿ± ÿ¨ŸàÿØÿ© ÿßŸÑÿ∑ÿ®ÿßÿπÿ© ŸàÿßŸÑŸàÿ∂Ÿàÿ≠</p>
            </div>
        </div>
    </div>
    
    <div class="test-container">
        <h2>üìÑ A4 Print Preview</h2>
        <div id="print-preview-container">
            <div class="print-preview" id="print-preview">
                <div style="display: flex; justify-content: space-between; align-items: baseline; border-bottom: 2px solid #9333ea; padding-bottom: 8mm; margin-bottom: 10mm;">
                    <div>
                        <div style="margin-bottom: 5mm;">Nama: ________________________</div>
                        <div>Kelas: _______________________</div>
                    </div>
                    <div>
                        <h1 style="margin: 0; font-size: 24px;">Latihan Seru Hari Ini!</h1>
                    </div>
                </div>
                
                <div style="background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 6px; padding: 4mm; margin-bottom: 5mm;">
                    <h3 style="margin: 0 0 3mm 0; font-size: 16px;">1. Hitung Apel üçé</h3>
                    <div style="font-size: 24px; margin: 3mm 0;">üçé üçé üçé üçé üçé</div>
                    <div>Jawaban: ___________</div>
                </div>
                
                <div style="background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 6px; padding: 4mm; margin-bottom: 5mm;">
                    <h3 style="margin: 0 0 3mm 0; font-size: 16px;">2. Penjumlahan Bintang ‚≠ê</h3>
                    <div style="font-size: 20px; margin: 3mm 0;">3 + 4 = _____</div>
                    <div style="font-size: 18px;">‚≠ê‚≠ê‚≠ê + ‚≠ê‚≠ê‚≠ê‚≠ê</div>
                </div>
                
                <div style="background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 6px; padding: 4mm; margin-bottom: 5mm;">
                    <h3 style="margin: 0 0 3mm 0; font-size: 16px;">3. Tebalkan Huruf</h3>
                    <div style="font-size: 36px; color: #ccc; border-bottom: 3px solid #999; letter-spacing: 0.5em; margin: 3mm 0;">ABCDE</div>
                </div>
                
                <div style="background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 6px; padding: 4mm; margin-bottom: 5mm;">
                    <h3 style="margin: 0 0 3mm 0; font-size: 16px;">4. Readability Test</h3>
                    <p style="font-size: 12px; line-height: 1.4; margin: 2mm 0;">Small text (12px): This tests the minimum readable size for detailed instructions.</p>
                    <p style="font-size: 14px; line-height: 1.4; margin: 2mm 0;">Normal text (14px): This is the optimal size for most worksheet content.</p>
                    <p style="font-size: 16px; line-height: 1.4; margin: 2mm 0;">Large text (16px): This size is good for emphasis and important information.</p>
                </div>
                
                <div style="background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 6px; padding: 4mm;">
                    <h3 style="margin: 0 0 3mm 0; font-size: 16px;">5. Print Quality Indicators</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 3mm; font-size: 12px;">
                        <div>‚úì Sharp text edges</div>
                        <div>‚úì Clear font rendering</div>
                        <div>‚úì Proper spacing</div>
                        <div>‚úì No content cutoff</div>
                        <div>‚úì Consistent margins</div>
                        <div>‚úì Readable at all sizes</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="test-container no-print">
        <h2>üìä Test Results</h2>
        <div id="test-results"></div>
    </div>
    
    <div class="test-container no-print">
        <h2>üìù Test Log</h2>
        <div id="log-output" class="log-output">Ready to run print quality tests...\n</div>
    </div>
    
    <script>
        // Logging function
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logOutput = document.getElementById('log-output');
            const prefix = type === 'error' ? '‚ùå' : type === 'warning' ? '‚ö†Ô∏è' : type === 'success' ? '‚úÖ' : '‚ÑπÔ∏è';
            logOutput.textContent += `[${timestamp}] ${prefix} ${message}\n`;
            logOutput.scrollTop = logOutput.scrollHeight;
        }
        
        function clearLog() {
            document.getElementById('log-output').textContent = 'Log cleared...\n';
        }
        
        // Display test result
        function displayResult(testName, passed, message, isWarning = false) {
            const resultsDiv = document.getElementById('test-results');
            const resultDiv = document.createElement('div');
            resultDiv.className = `test-result ${passed ? 'test-pass' : isWarning ? 'test-warning' : 'test-fail'}`;
            resultDiv.innerHTML = `<strong>${testName}:</strong> ${message}`;
            resultsDiv.appendChild(resultDiv);
        }
        
        // Test readability of different font sizes
        function runReadabilityTest() {
            log('Running readability test...', 'info');
            
            const fontSamples = document.querySelectorAll('.font-sample');
            let readableCount = 0;
            let totalCount = 0;
            
            fontSamples.forEach(sample => {
                const qualityIndicator = sample.querySelector('.quality-indicator');
                if (qualityIndicator) {
                    totalCount++;
                    if (qualityIndicator.classList.contains('quality-excellent') || 
                        qualityIndicator.classList.contains('quality-good')) {
                        readableCount++;
                    }
                }
            });
            
            const readabilityPercentage = (readableCount / totalCount) * 100;
            
            displayResult('Font Size Readability', 
                readabilityPercentage >= 70,
                `${readableCount}/${totalCount} font sizes are good or excellent (${readabilityPercentage.toFixed(1)}%)`);
            
            log(`Readability test completed: ${readabilityPercentage.toFixed(1)}% of fonts are readable`, 
                readabilityPercentage >= 70 ? 'success' : 'warning');
        }
        
        // Test font sizes for A4 optimization
        function testFontSizes() {
            log('Testing font size optimization for A4...', 'info');
            
            const fontTests = [
                { size: 8, expected: 'poor', name: 'Too Small' },
                { size: 10, expected: 'fair', name: 'Minimum' },
                { size: 12, expected: 'good', name: 'Small' },
                { size: 14, expected: 'excellent', name: 'Optimal Body' },
                { size: 16, expected: 'good', name: 'Large Body' },
                { size: 20, expected: 'good', name: 'Exercise Title' },
                { size: 24, expected: 'excellent', name: 'Main Title' },
                { size: 32, expected: 'good', name: 'Display' },
                { size: 48, expected: 'excellent', name: 'Tracing' }
            ];
            
            let passedTests = 0;
            
            fontTests.forEach(test => {
                // Simple heuristic for font size appropriateness
                let actual = 'poor';
                if (test.size >= 10 && test.size <= 16) actual = test.size === 14 ? 'excellent' : 'good';
                else if (test.size >= 18 && test.size <= 32) actual = test.size === 24 ? 'excellent' : 'good';
                else if (test.size >= 40 && test.size <= 60) actual = 'excellent';
                else if (test.size >= 10 && test.size <= 72) actual = 'fair';
                
                const passed = (actual === test.expected) || 
                              (test.expected === 'good' && actual === 'excellent') ||
                              (test.expected === 'excellent' && actual === 'good');
                
                if (passed) passedTests++;
                
                displayResult(`${test.name} (${test.size}px)`, passed,
                    `Expected: ${test.expected}, Actual: ${actual}`);
            });
            
            const successRate = (passedTests / fontTests.length) * 100;
            log(`Font size test completed: ${passedTests}/${fontTests.length} tests passed (${successRate.toFixed(1)}%)`, 
                successRate >= 80 ? 'success' : 'warning');
        }
        
        // Test line heights
        function testLineHeights() {
            log('Testing line height optimization...', 'info');
            
            const lineHeightTests = [
                { height: 1.0, expected: 'poor', name: 'Too Tight' },
                { height: 1.2, expected: 'fair', name: 'Minimal' },
                { height: 1.4, expected: 'excellent', name: 'Optimal' },
                { height: 1.6, expected: 'good', name: 'Comfortable' },
                { height: 2.0, expected: 'fair', name: 'Too Loose' }
            ];
            
            let passedTests = 0;
            
            lineHeightTests.forEach(test => {
                // Heuristic for line height appropriateness
                let actual = 'poor';
                if (test.height >= 1.2 && test.height <= 1.8) {
                    actual = test.height === 1.4 ? 'excellent' : 'good';
                } else if (test.height >= 1.0 && test.height <= 2.2) {
                    actual = 'fair';
                }
                
                const passed = actual === test.expected;
                if (passed) passedTests++;
                
                displayResult(`Line Height ${test.name} (${test.height})`, passed,
                    `Expected: ${test.expected}, Actual: ${actual}`);
            });
            
            const successRate = (passedTests / lineHeightTests.length) * 100;
            log(`Line height test completed: ${passedTests}/${lineHeightTests.length} tests passed (${successRate.toFixed(1)}%)`, 
                successRate >= 80 ? 'success' : 'warning');
        }
        
        // Test print preview
        function testPrintPreview() {
            log('Testing print preview quality...', 'info');
            
            const printPreview = document.getElementById('print-preview');
            const rect = printPreview.getBoundingClientRect();
            
            // Check if preview has reasonable dimensions
            const hasReasonableDimensions = rect.width > 200 && rect.height > 300;
            
            displayResult('Print Preview Dimensions', hasReasonableDimensions,
                `Preview size: ${rect.width.toFixed(0)}√ó${rect.height.toFixed(0)}px`);
            
            // Check if all text elements are visible
            const textElements = printPreview.querySelectorAll('h1, h3, p, div');
            let visibleElements = 0;
            
            textElements.forEach(element => {
                const elementRect = element.getBoundingClientRect();
                if (elementRect.width > 0 && elementRect.height > 0) {
                    visibleElements++;
                }
            });
            
            const visibilityRate = (visibleElements / textElements.length) * 100;
            
            displayResult('Content Visibility', visibilityRate >= 95,
                `${visibleElements}/${textElements.length} elements visible (${visibilityRate.toFixed(1)}%)`);
            
            // Check font rendering
            const computedStyle = window.getComputedStyle(printPreview);
            const fontSize = parseFloat(computedStyle.fontSize);
            const lineHeight = parseFloat(computedStyle.lineHeight) / fontSize;
            
            const fontSizeGood = fontSize >= 12 && fontSize <= 16;
            const lineHeightGood = lineHeight >= 1.2 && lineHeight <= 1.8;
            
            displayResult('Base Font Settings', fontSizeGood && lineHeightGood,
                `Font: ${fontSize}px, Line height: ${lineHeight.toFixed(2)}`);
            
            log(`Print preview test completed: ${hasReasonableDimensions && visibilityRate >= 95 ? 'passed' : 'issues detected'}`, 
                hasReasonableDimensions && visibilityRate >= 95 ? 'success' : 'warning');
        }
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            log('Print quality visual test page loaded', 'info');
            log('Use the test buttons to evaluate different aspects of print quality', 'info');
            log('Use "Print Test Page" to test actual printing quality', 'info');
        });
    </script>
</body>
</html>